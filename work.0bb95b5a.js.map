{"version":3,"sources":["js/work.js"],"names":["math","lerp","a","b","n","norm","value","min","max","config","height","window","innerHeight","width","innerWidth","Smooth","bindMethods","data","ease","current","last","rounded","dom","el","document","querySelector","content","rAF","init","forEach","fn","bind","Object","assign","style","position","top","left","overflow","body","getBoundingClientRect","setHeight","imagesLoaded","instance","scrollY","Math","round","diff","skew","transform","requestAnimationFrame","setStyles","addEvents","cancelAnimationFrame","removeEvents","run","addEventListener","resize","passive","scroll","removeEventListener","preload","on"],"mappings":"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","file":"work.0bb95b5a.js","sourceRoot":"../src","sourcesContent":["const math = {\n    lerp: (a, b, n) => {\n        return (1 - n) * a + n * b\n    },\n    norm: (value, min, max) => {\n        return (value - min) / (max - min)\n    }\n}\n\nconst config = {\n  height: window.innerHeight,\n  width: window.innerWidth\n}\n\nclass Smooth {\n  constructor() {\n    this.bindMethods()\n\n    this.data = {\n      ease: 0.1,\n      current: 0,\n      last: 0,\n      rounded: 0\n    }\n\n    this.dom = {\n      el: document.querySelector('[data-scroll]'),\n      content: document.querySelector('[data-scroll-content]')\n    }\n\n    this.rAF = null\n\n    this.init()\n  }\n\n  bindMethods() {\n    ['scroll', 'run', 'resize']\n    .forEach((fn) => this[fn] = this[fn].bind(this))\n  }\n\n  setStyles() {\n    Object.assign(this.dom.el.style, {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%',\n      overflow: 'hidden'        \n    })   \n  }\n\n  setHeight() {\n    document.body.style.height = `${this.dom.content.getBoundingClientRect().height}px`\n  }\n\n  resize() {\n    this.setHeight()\n    this.scroll()\n  }\n\n  preload() {\n    imagesLoaded(this.dom.content, (instance) => {\n      this.setHeight()\n    })\n  }\n\n  scroll() {\n    this.data.current = window.scrollY\n  }\n\n  run() {\n    this.data.last += (this.data.current - this.data.last) * this.data.ease\n    this.data.rounded = Math.round(this.data.last * 100) / 100\n    \n    const diff = this.data.current - this.data.rounded\n    const acc = diff / config.width\n    const velo =+ acc\n    const skew = velo * 7.5\n    \n    this.dom.content.style.transform = `translate3d(0, -${this.data.rounded}px, 0) skewY(${skew}deg)`\n\n    this.requestAnimationFrame()\n  }\n\n  on() { \n    this.setStyles()\n    this.setHeight()\n    this.addEvents()\n\n    this.requestAnimationFrame()\n  }\n\n  off() {\n    this.cancelAnimationFrame()\n\n    this.removeEvents()\n  }\n\n  requestAnimationFrame() {\n    this.rAF = requestAnimationFrame(this.run)\n  }\n\n  cancelAnimationFrame() {\n    cancelAnimationFrame(this.rAF)\n  }\n\n  destroy() {\n    document.body.style.height = ''\n\n    this.data = null\n\n    this.removeEvents()\n    this.cancelAnimationFrame()\n  }\n\n  resize() {\n    this.setHeight()\n    this.data.rounded = this.data.last = this.data.current\n  }\n\n  addEvents() {\n    window.addEventListener('resize', this.resize, { passive: true })\n    window.addEventListener('scroll', this.scroll, { passive: true })\n  }\n\n  removeEvents() {\n    window.removeEventListener('resize', this.resize, { passive: true })\n    window.removeEventListener('scroll', this.scroll, { passive: true })\n  }\n\n  init() {\n    this.preload()\n    this.on()\n  }\n}\n\nnew Smooth()"]}